# 암호 기법 (cryptography)

> 💡 cryptography란 “비밀(secret)”을 의미하는 kryptos와 “쓰다(write)”를 의미하는 grapho의 합성어로, 메시지의 기밀성을 제공하기 위하여 사용. 메시지를 공격자로부터 안전하게 보호하기 위하여 메시지를 변화하는 과학이나 기술을 의미

## 관련 용어 정리

- Plaintext (평문) : 암호화되기 전의 메시지를 의미
- Encryption algorithm (암호화 알고리즘)
- Secret Key (암호화 키) : 암호 알고리즘의 안정성은 암호화 키에 의존
- Ciphertext (암호문) : 암호화 된 후의 메시지를 의미
- Decryption algorithm (복호화 알고리즘)

# 대칭키

> 💡 대칭 키 암호(symmetric-key algorithm)란 암호화 알고리즘의 한 종류로, 암호화와 복호화에 같은 암호 키를 쓰는 알고리즘

## 특징

- 암호화하는 측과 복호화를 하는 측이 같은 암호 키를 공유해야 한다.
- 비교적 계산 속도가 빠르다.
- 비밀 키 하나만 알아내면 암호화된 내용을 해독 가능하다 → 키를 교환하는 것이 어렵고 위험하다.
- 키 길이 : 주로 64비트, 128비트 등 작은 길이
- 암호화할 수 있는 평문의 길이에 제한이 없다.
- 암호 알고리즘 내부 구조가 단순하여, 시스템 개발 환경에 용이하다.
- 디지털 서명 기법에 적용이 곤란하고 안전성을 분석하기가 어렵고 중재자가 필요하다.

## 종류

- 스트림 암호 : 연속적인 비트/바이트를 계속해서 입력받아, 그에 대응하는 암호화 비트/바이트를 생성하는 방식
- 블록 암호 : 정해진 한 단위(블록)를 입력받아 그에 대응하는 암호화 블록을 생성하는 방식
- ex) DES, 3-DES, AES, SEED, ARIA, MASK 등

### 대표적인 대칭 키 암호시스템 AES

- 암호화키 = 복호화키
- 비밀키 분배 : 필요
- 보유 비밀키의 개수 : n - 1 (n명이 비밀 통신하는 경우, 상대방별로 키가 필요)
- 암호화 및 복호화 속도 : 빠름

# 비대칭키 (공개키)

> 💡 비대칭 키 암호화(public-key cryptography)란 암호화 알고리즘의 한 종류로, 암호화와 복호화에 이용하는 키가 다른 방식을 말한다.

## 특징

- 공개키와 비밀키 두 개 존재
- 암호화와 복호화에 사용하는 키가가 서로 다름
- 암호화할 때의 키는 공개키,  복호화할 때의 키는 개인키
    - 개인키로 암호화 한 정보는 그 쌍이 되는 공개키로만 복호화가 가능하고, 공개키로 암호화한 정보는 그 쌍이 되는 개인키로만 복호화가 가능하다.
- 공개키는 누구나 알 수 있지만, 그에 대응하는 비밀키는 키의 소유자만이 알 수 있어서 특정한 비밀키를 가지는 사용자만이 내용을 열어볼 수 있도록 하는 방식
    - 다른 유저와 키를 공유하지 않더라도 암호를 통한 안전한 통신을 할 수 있다.
- 비교적 계산 속도가 느리다.
- 속도가 느리기 때문에 긴 문서의 암호화하는 경우보다 대칭키 알고리즘의 키 값에 대한 암호에 사용한다.
- 키 길이 : 주로 512, 1024, 2048 비트 등 큰 길이
- 암호화할 수 있는 평문의 길이에 제한이 있다.

### 통신 절차

1. 송신자는 수신자의 공개키를 구한다.
2. 송신자는 수신자의 공개키로 평문을 암호화한다.
3. 송신자는 암호화된 메시지를 상대방에게 전달한다. 메시지는 암호화되어 있기 때문에 전달 도중에 유출되거나 도청이 되더라도 암호문으로부터 원문을 알아내기 어렵다.
4. 수신자는 자신의 비밀키로 암호화된 메시지를 해독해서 평문을 얻는다.

## 종류

- RSA
- Elgamal
- Diffie-hellman
- EC(타원곡선)

### 대표적인 비대칭 키 암호시스템 RSA

- 암호화키 ≠ 복호화키
- 비밀키 분배 : 불필요
- 비밀키 개수 : 1개 (자신의 비밀키만 보유)
- 암호화 및 복호화 속도 : 느림

# 해시 함수

**데이터의 무결성**을 제공하기 위해 사용

> 💡 해싱 알고리즘이란, 데이터를 최종 사용자가 원문을 추정하기 힘든 더 작고, 뒤섞인 조각으로 나누는 것

> 💡 해시 함수란, 특정 입력 데이터에서 고정 길이값 또는 해시값을 생성하는 알고리즘

> 💡 해시(Hash)란, 해시 함수(해시 알고리즘)을 이용하여 임의의 길이를 가진 데이터를 고정된 길이의 데이터로 맵핑하는 것.


## 특징

- 단방향 암호화 기법
- 암호화만 가능하고 복호화는 불가능하다.
    - 임의의 길이 데이터 -> 고정된 길이 데이터 (암호화) 가능
    - 고정된 길이 데이터 -> 임의의 길이 데이터 (복호화) 불가능
- 동일한 입력값으로 항상 동일한 해시를 생성한다.
- 주어진 입력값에 대해 빠르게 해시 연산을 수행한다.
- 해시로부터 입력 값을 생성하는 것은 계산상 어렵습니다..
- 동일한 해시를 가진 두 개의 서로 다른 메시지를 찾는 것은 계산상 어렵습니다.
- 메시지를 아주 조금만 변경해도 해시가 광범위하게 변경되어 이전 해시와 관련성을 찾을 수 없습니다.

### 암호화 해시 함수가 가져야하는 성질

- 역상 저항성(preimage resistance): 주어진 해시 값에 대해, 그 해시 값을 생성하는 입력값을 찾는 것이 계산상 어렵다. 즉, 제 1 역상 공격에 대해 안전해야 한다. 이 성질은 일방향함수와 연관되어 있다.
- 제 2 역상 저항성(second preimage resistance): 입력 값에 대해, 그 입력의 해시 값을 바꾸지 않으면서 입력을 변경하는 것이 계산상 어렵다. 제 2 역상 공격에 대해 안전해야 한다.
- 충돌 저항성(collision resistance): 해시 충돌에 대해 안전해야 한다. 같은 해시 값을 생성하는 두 개의 입력값을 찾는 것이 계산상 어려워야 한다.

## 종류

- MD5
    - 임의 길이의 메시지를 입력 받아 128 비트의 고정 길이를 출력하는 암호화 해시함수
- SHA
    - SHA-0 : 최초의 SHA로 1993년 NIST(National Institute of Standards and Technology)에 의해서 제정되고 1995년 NSA(National Security Agency)에 의해서 폐기된 함수
    - SHA-1 : 최대 2^64 비트 메시지의 160 비트 해시값을 생성하는 함수로 1995년 제정되고 활발하게 이용되어 왔으나, 안전하지 않다고 알려져 NIST에서 사용을 중지시킴
    - SHA-2 : 2002년에 정식으로 표준으로 채택이 되고, SHA-224, 256, 385, 512 4개를 모두 아울러 SHA-2라고 명칭
- Whirlpool (월풀)
- RIPEMD
- CRC32

# cf) SALT

> 💡 Salt란, 데이터, 비밀번호, 통과암호를 해시 처리하는 단방향 함수의 추가 입력으로 사용되는 랜덤 데이터

- 원문에 임의의 문자열을 붙인다는 의미의 소금친다(salting)의 의미
- 스토리지에서 비밀번호를 보호하기 위해 사용
- 역사적으로 비밀번호는 시스템에 평문으로 저장되지만 시간이 지남에 따라 추가적인 보호 방법이 개발되어 시스템으로부터 사용자의 비밀번호 읽기를 보호한다. 솔트는 이러한 방식의 하나이다.

참고자료 : [https://ko.wikipedia.org/wiki/대칭_키_암호](https://ko.wikipedia.org/wiki/%EB%8C%80%EC%B9%AD_%ED%82%A4_%EC%95%94%ED%98%B8), 네프 교수님 자료…, [http://wiki.hash.kr/index.php/대칭키_암호_알고리즘](http://wiki.hash.kr/index.php/%EB%8C%80%EC%B9%AD%ED%82%A4_%EC%95%94%ED%98%B8_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98), [https://ko.wikipedia.org/wiki/공개_키_암호_방식](https://ko.wikipedia.org/wiki/%EA%B3%B5%EA%B0%9C_%ED%82%A4_%EC%95%94%ED%98%B8_%EB%B0%A9%EC%8B%9D), [https://www.appsealing.com/kr/해싱-알고리즘/](https://www.appsealing.com/kr/%ED%95%B4%EC%8B%B1-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/), [https://ko.wikipedia.org/wiki/암호화_해시_함수](https://ko.wikipedia.org/wiki/%EC%95%94%ED%98%B8%ED%99%94_%ED%95%B4%EC%8B%9C_%ED%95%A8%EC%88%98)